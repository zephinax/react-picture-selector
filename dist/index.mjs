import{jsx as e,jsxs as t,Fragment as r}from"react/jsx-runtime";import n,{useState as o,useRef as i,useCallback as a,useEffect as l,useMemo as s}from"react";import d from"react-dom";import c from"axios";var u={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},h=n.createContext&&n.createContext(u),p=["attr","size","title"];function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(this,arguments)}function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){v(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e){return e&&e.map((e,t)=>n.createElement(e.tag,b({key:t},e.attr),y(e.child)))}function x(e){return t=>n.createElement(w,m({attr:b({},e.attr)},t),y(e.child))}function w(e){var t=t=>{var r,{attr:o,size:i,title:a}=e,l=g(e,p),s=i||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",m({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,l,{className:r,style:b(b({color:e.color||t.color},t.style),e.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),a&&n.createElement("title",null,a),e.children)};return void 0!==h?n.createElement(h.Consumer,null,e=>t(e)):t(u)}function C(e){return x({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function M(e){return x({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}function k(e){return x({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83a.996.996 0 0 0 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"},child:[]}]})(e)}function L(e){return x({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M7.34 6.41.86 12.9l6.49 6.48 6.49-6.48-6.5-6.49zM3.69 12.9l3.66-3.66L11 12.9l-3.66 3.66-3.65-3.66zm15.67-6.26A8.95 8.95 0 0 0 13 4V.76L8.76 5 13 9.24V6c1.79 0 3.58.68 4.95 2.05a7.007 7.007 0 0 1 0 9.9 6.973 6.973 0 0 1-7.79 1.44l-1.49 1.49C10.02 21.62 11.51 22 13 22c2.3 0 4.61-.88 6.36-2.64a8.98 8.98 0 0 0 0-12.72z"},child:[]}]})(e)}function j(e){return x({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 13a9 9 0 0 0 13.79 7.62l-1.46-1.46c-.99.53-2.13.84-3.33.84-3.86 0-7-3.14-7-7s3.14-7 7-7h.17L9.59 7.59 11 9l4-4-4-4-1.42 1.41L11.17 4H11a9 9 0 0 0-9 9zm9 0 6 6 6-6-6-6-6 6zm6 3.17L13.83 13 17 9.83 20.17 13 17 16.17z"},child:[]}]})(e)}function E(e){return x({attr:{fill:"none",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},child:[]}]})(e)}const O=({isOpen:t,onClose:r,children:n,className:o,size:i="fit",overflowY:a="overflow-y-auto",childrenClass:l})=>{const s={position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999,backgroundColor:"rgba(0, 0, 0, 0.424)",backdropFilter:"blur(4px)",display:"flex",alignItems:"center",justifyContent:"center",transform:t?"translateY(0)":"translateY(100%)",transition:"transform 500ms ease"},c=Object.assign({position:"relative",zIndex:9999,borderTopLeftRadius:"1rem",borderTopRightRadius:"1rem",borderBottomLeftRadius:"0.5rem",borderBottomRightRadius:"0.5rem",marginLeft:0,marginRight:0,transition:"all 300ms ease 200ms",opacity:t?1:0,maxWidth:"90%"},{sm:{width:"370px"},md:{width:"750px"},lg:{width:"1100px"},xl:{width:"80%"},full:{width:"90%"},fit:{}}[i]),u={maxHeight:"80svh",borderRadius:"1rem",overflowY:"overflow-y-auto"===a?"auto":"visible"};return t&&d.createPortal(e("div",{onClick:()=>{r()},style:s,children:e("div",{onClick:e=>e.stopPropagation(),style:c,className:o,children:e("div",{style:u,className:l,children:n})})}),document.body)};function z(e){return x({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.504 13.616l-3.79-3.223c-0.392-0.353-0.811-0.514-1.149-0.499 0.895-1.048 1.435-2.407 1.435-3.893 0-3.314-2.686-6-6-6s-6 2.686-6 6 2.686 6 6 6c1.486 0 2.845-0.54 3.893-1.435-0.016 0.338 0.146 0.757 0.499 1.149l3.223 3.79c0.552 0.613 1.453 0.665 2.003 0.115s0.498-1.452-0.115-2.003zM6 10c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4zM7 3h-2v2h-2v2h2v2h2v-2h2v-2h-2z"},child:[]}]})(e)}function D(e){return x({attr:{version:"1.1",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M15.504 13.616l-3.79-3.223c-0.392-0.353-0.811-0.514-1.149-0.499 0.895-1.048 1.435-2.407 1.435-3.893 0-3.314-2.686-6-6-6s-6 2.686-6 6 2.686 6 6 6c1.486 0 2.845-0.54 3.893-1.435-0.016 0.338 0.146 0.757 0.499 1.149l3.223 3.79c0.552 0.613 1.453 0.665 2.003 0.115s0.498-1.452-0.115-2.003zM6 10c-2.209 0-4-1.791-4-4s1.791-4 4-4 4 1.791 4 4-1.791 4-4 4zM3 5h6v2h-6z"},child:[]}]})(e)}function P(e){return x({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"},child:[]},{tag:"path",attr:{d:"M3 3v5h5"},child:[]},{tag:"path",attr:{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"},child:[]},{tag:"path",attr:{d:"M16 16h5v5"},child:[]}]})(e)}function I(e,t,r,n){return new(r||(r=Promise))(function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,l)}s((n=n.apply(e,t||[])).next())})}function $(e){var t,r;if(!function(e){return"object"==typeof e&&null!==e&&"message"in e&&("response"in e||"request"in e)}(e))return e instanceof Error?e.message:"string"==typeof e?e:"An unexpected error occurred";if(!e.response)return e.request?"Network error: Could not connect to server":e.message||"Request configuration error";{const n=e.response.status,o=(null===(t=e.response.data)||void 0===t?void 0:t.message)||(null===(r=e.response.data)||void 0===r?void 0:r.error);switch(n){case 400:return o||"Bad request";case 401:return"Please log in again";case 403:return"You do not have permission to perform this action";case 404:return"The requested resource was not found";case 500:return o||"Server error, please try again later";default:return o||`Server error: ${n}`}}}function T(e,t={}){const{setError:r,context:n="operation",isTestMode:o=!1,onCancel:i}=t;if(function(e,t="",r=!1){const n=r?"ðŸ§ª Test Mode:":"",o=$(e);console.error(`${n} Error in ${t}:`,o)}(e,n,o),function(e){return e instanceof Error&&("Delete canceled"===e.message||"Upload canceled"===e.message||e.message.includes("cancel")||e.message.includes("abort"))}(e))i&&i();else if(r){r($(e))}}"function"==typeof SuppressedError&&SuppressedError;const S=e=>{if(e)return Object.fromEntries(Object.entries(e).map(([e,t])=>"authorization"===e.toLowerCase()?[e,"REDACTED"]:[e,t]))},U=({apiConfig:e,testMode:t,testUploadDelay:r,onChangeImage:n,currentImageUrl:a,enableAbortController:s,setImgError:d,debug:u=!1})=>{const[h,p]=o(0),[g,m]=o(null),[f,b]=o(!1),[v,y]=o(!1),x=i(null),w=i(null),C=i(null),M=i(0),k=i(!0),L=(...e)=>{u&&console.debug("[PictureSelector]",...e)},j=()=>{p(0),M.current=0,k.current=!0,b(!1),m(null),d(!1),w.current&&(clearInterval(w.current),w.current=null),C.current&&(cancelAnimationFrame(C.current),C.current=null)},E=()=>{C.current&&(cancelAnimationFrame(C.current),C.current=null);const e=()=>{p(t=>{if(t>=M.current||t>=100)return C.current=null,Math.min(100,t);const r=M.current-t;if(r<.1)return C.current=null,t;const n=Math.max(.5,.15*r),o=Math.min(100,t+n);return o<100&&(C.current=requestAnimationFrame(e)),o})};C.current=requestAnimationFrame(e)},O=()=>I(void 0,void 0,void 0,function*(){var r,o,i,l;if(a){y(!0),m(null),d(!1),null===(r=e.onDeleteStart)||void 0===r||r.call(e),L("delete:start",{url:`${e.baseUrl}${e.deleteUrl}`,method:e.deleteMethod||"POST",headers:S(e.deleteHeaders),body:"function"==typeof e.deleteBody?e.deleteBody(a):e.deleteBody,testMode:t});try{if(t){if(yield new Promise(e=>setTimeout(e,300)),s&&(null===(o=x.current)||void 0===o?void 0:o.signal.aborted))throw new Error("Delete canceled");n("",void 0)}else{if(e.deleteUrl){const t=yield c.request({method:e.deleteMethod||"POST",url:`${e.baseUrl}${e.deleteUrl}`,data:"function"==typeof e.deleteBody?e.deleteBody(a):e.deleteBody,headers:e.deleteHeaders,signal:s?null===(i=x.current)||void 0===i?void 0:i.signal:void 0});L("delete:response",{status:t.status})}n("",void 0)}null===(l=e.onDeleteSuccess)||void 0===l||l.call(e),L("delete:success")}catch(e){T(e,{setError:m,context:"deleting image",isTestMode:t}),L("delete:error",e)}finally{y(!1)}}});return l(()=>()=>{s&&x.current&&x.current.abort(),j()},[s]),{uploadProgress:h,error:g,loading:f,deleting:v,handleImageChange:o=>I(void 0,void 0,void 0,function*(){var i,l,u,g,f;const v=null===(l=null===(i=o.target)||void 0===i?void 0:i.files)||void 0===l?void 0:l[0];if(!v)return;if(!v.type.startsWith("image/"))return m("Please select an image file"),void(null===(u=e.onUploadError)||void 0===u||u.call(e,new Error("Invalid file type")));L("upload:start",{fileName:v.name,fileType:v.type,fileSize:v.size,method:e.uploadMethod||"POST",url:`${e.baseUrl}${e.uploadUrl}`,headers:S(e.uploadHeaders),testMode:t});const y=(()=>{var e;return s?(null===(e=x.current)||void 0===e||e.abort(),x.current=new AbortController,j(),x.current):new AbortController})();b(!0),p(0),M.current=0,k.current=!0,yield new Promise(e=>setTimeout(e,50));try{const o=new Promise(e=>setTimeout(e,700));let i,l;if(t){const t=yield(t=>new Promise((n,o)=>{const i=new FileReader;i.onload=()=>{let e=0;const t=r/100;w.current=setInterval(()=>{e+=1,p(e),e>=100&&(clearInterval(w.current),w.current=null,n(i.result))},t)},i.onerror=()=>{var t;clearInterval(w.current),w.current=null;const r=new Error("Error reading file");null===(t=e.onUploadError)||void 0===t||t.call(e,r),o(new Error("Error reading file"))},i.readAsDataURL(t)}))(v);if(y.signal.aborted)throw new Error("Upload canceled");yield o,i=t,l={data:{url:t}}}else{const t=new FormData;t.append(e.formDataName||"",v);const r=c.request({method:e.uploadMethod||"POST",url:`${e.baseUrl}${e.uploadUrl}`,data:t,signal:y.signal,onUploadProgress:e=>{let t=0;if(e.total&&e.total>0)t=Math.round(e.loaded/e.total*100);else{const e=Math.min(99,h+.05*(100-h));t=Math.round(e)}k.current&&t>5&&(t=5,k.current=!1),M.current=Math.max(M.current,t),E()},headers:e.uploadHeaders}),[n]=yield Promise.all([r,o]);if(M.current=100,E(),yield new Promise(e=>setTimeout(e,300)),C=n,z=e.responsePath||"data.data",i=C?(Array.isArray(z)?z:z.split(".")).reduce((e,t)=>e&&void 0!==e[t]?e[t]:null,C):null,l=n.data,L("upload:response",{status:n.status,responsePath:e.responsePath||"data.data"}),!i)throw new Error("Failed to extract image URL from response")}a&&(yield O()),d(!1),b(!1),n(i,l),null===(g=e.onUploadSuccess)||void 0===g||g.call(e,i),L("upload:success",{imageUrl:i}),p(0),M.current=0,k.current=!0}catch(r){"CanceledError"===r.name||"Upload canceled"===r.message||(T(r,{setError:m,context:"uploading image",isTestMode:t}),null===(f=e.onUploadError)||void 0===f||f.call(e,r)),L("upload:error",r),j()}var C,z}),handleDeleteImage:O}},R={uploadUrl:"UPLOAD_URL",baseUrl:"BASE_URL",responsePath:"data",formDataName:"File",deleteBody:{},deleteMethod:"POST",uploadMethod:"POST",onUploadSuccess:()=>{},onUploadError:()=>{},onDeleteStart:()=>{},onDeleteSuccess:()=>{}},F=({apiConfig:n,additionalClassNames:d={title:"",titleContainer:"",delete:"",edit:"",image:""},colors:c,imageUrl:u,type:h="profile",onChangeImage:p,viewOnly:g=!1,title:m,size:f=180,buttonsMinSize:b=30,showProgressRing:v=!0,blurOnProgress:y=!0,enableAbortController:x=!0,debug:w=!1,testMode:I=!1,testUploadDelay:$=1e3})=>{const{modalImagePreview:T,openImage:S}=function(){const[r,n]=o({status:!1,url:""}),d=i(null),[c,u]=o(0),[h,p]=o({width:0,height:0}),[g,m]=o(!1),[f,b]=o({width:0,height:0}),[v,y]=o(1),[x,w]=o({x:0,y:0}),[k,E]=o(!1),P=i({x:0,y:0}),I=i(null),[$,T]=o(!1),S=a(e=>{e&&(n({status:!0,url:e}),y(1),w({x:0,y:0}),u(0))},[]),U=a(()=>{n({status:!1,url:""}),m(!1),E(!1),w({x:0,y:0}),y(1)},[]),R=a(()=>{var e,t;if(g)null===(t=document.exitFullscreen)||void 0===t||t.call(document);else{const t=d.current;t&&(null===(e=t.requestFullscreen)||void 0===e||e.call(t).catch(e=>{console.error(`Error attempting to enable fullscreen: ${e.message}`)}))}m(!g)},[g]);l(()=>{const e=()=>{m(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e)}},[]),l(()=>{if(!r.url)return;const e=new Image;e.src=r.url,e.onload=()=>{p({width:e.naturalWidth,height:e.naturalHeight})},e.onerror=()=>{console.error("Failed to load image"),n({status:!1,url:""})}},[r.url]),l(()=>{const e=()=>{if(d.current){const e=d.current.getBoundingClientRect();b({width:e.width,height:e.height})}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[r.status]);const F=s(()=>h.width&&h.height&&f.width&&f.height?Math.min(f.width/h.width,f.height/h.height):1,[f.height,f.width,h.height,h.width]),H=s(()=>{const e=Math.max(h.width,h.height)?220/Math.max(h.width,h.height):1;return Math.max(F,e)},[F,h.height,h.width]),B=s(()=>Math.max(.2,.35*H),[H]),W=s(()=>Math.max(8,6*H),[H]);l(()=>{r.status&&H&&(y(H),w({x:0,y:0}))},[H,r.status]);const A=a((e,t,r)=>Math.min(Math.max(e,t),r),[]),N=a((e,t)=>{y(r=>{const n=A(e,B,W);if(!t||!d.current)return n;const{width:o,height:i,left:a,top:l}=d.current.getBoundingClientRect(),s=t.x-(a+o/2),c=t.y-(l+i/2),u=n/r;return w(e=>({x:e.x*u+s*(1-u),y:e.y*u+c*(1-u)})),n})},[A,W,B]),Y=a(e=>{e.preventDefault();const t=e.deltaY>0?-.1:.1;N(v*(1+t),{x:e.clientX,y:e.clientY})},[N,v]),Z=a(e=>{var t,r;0===e.button&&(E(!0),P.current={x:e.clientX,y:e.clientY},null===(r=(t=e.currentTarget).setPointerCapture)||void 0===r||r.call(t,e.pointerId))},[]),V=a(e=>{if(!k)return;e.preventDefault();const t=e.clientX-P.current.x,r=e.clientY-P.current.y;P.current={x:e.clientX,y:e.clientY},w(e=>({x:e.x+t,y:e.y+r}))},[k]),q=a(()=>{E(!1)},[]),X=a(()=>{w({x:0,y:0}),y(H||1)},[H]),_=a(()=>{w({x:0,y:0}),N(1)},[N]),G=a(()=>{Math.abs(v-F)<.01?_():X()},[F,_,X,v]),J=a(e=>{N(v*(1+("in"===e?.15:-.15)))},[N,v]),K=a(e=>{const t=I.current;if(!t)return;const r=t.getBoundingClientRect(),n=A((e-r.top)/r.height,0,1);N(W-n*(W-B))},[N,A,W,B]),Q=a(e=>{var t,r;T(!0),null===(r=(t=e.currentTarget).setPointerCapture)||void 0===r||r.call(t,e.pointerId),K(e.clientY)},[K]),ee=a(e=>{$&&K(e.clientY)},[$,K]),te=a(()=>{T(!1)},[]),re=a(()=>{if(!h.width||!h.height)return{width:600,height:600};const e=.8*window.innerWidth,t=.8*window.innerHeight,r=Math.min(e/h.width,t/h.height,1);return{width:Math.floor(h.width*r),height:Math.floor(h.height*r)}},[h]);return{modalImagePreview:a(()=>{const n=re(),{width:o,height:i}=h,a="undefined"!=typeof window?window.innerWidth:n.width,l="undefined"!=typeof window?window.innerHeight:n.height,s=Math.min(Math.max(n.width,340),.92*a),p=s<420,m=p?34:40,f=p?140:160,b=p?"0.6rem 0.5rem":"0.75rem 0.75rem",y={position:"relative",width:`${s}px`,height:`${Math.min(Math.max(n.height,340),.82*l)}px`,maxWidth:"1200px",maxHeight:"82vh"},w={position:"relative",width:"100%",height:"100%",overflow:"hidden",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"14px",boxShadow:"0 18px 48px rgba(0,0,0,0.35)",background:"radial-gradient(circle at 20% 20%, rgba(255,255,255,0.06), transparent 35%), radial-gradient(circle at 80% 0%, rgba(255,255,255,0.04), transparent 30%), #0b0d12",cursor:v>F?k?"grabbing":"grab":"default",touchAction:"none"},E={position:"absolute",top:"1rem",left:"1rem",right:"1rem",display:"flex",gap:p?"0.35rem":"0.5rem",zIndex:10,flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},P={backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"0.55rem",width:`${m}px`,height:`${m}px`,backdropFilter:"blur(16px)",transition:"background-color 0.2s ease",border:"none",cursor:"pointer",color:"white",display:"flex",alignItems:"center",justifyContent:"center"};Object.assign(Object.assign({},P),{backgroundColor:"rgba(0, 0, 0, 0.5)"});const $={position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",zIndex:12,display:"flex",flexDirection:"column",gap:"0.4rem",alignItems:"center",padding:b,minWidth:"46px",borderRadius:"999px",backgroundColor:"rgba(0,0,0,0.25)",backdropFilter:"blur(10px)",boxShadow:"0 4px 14px rgba(0,0,0,0.2)"};return e(O,{title:"Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø¹Ú©Ø³",isOpen:r.status,onClose:U,className:"image-preview-modal",size:"xl",children:r.url&&o&&i?e("div",{style:{width:"100%",maxWidth:"1200px",display:"flex",justifyContent:"center",alignItems:"center",color:"white",position:"relative",margin:"0 auto",padding:"0.75rem",gap:"0.75rem"},children:t("div",{style:y,children:[e("div",{ref:d,style:w,onWheel:Y,onPointerDown:Z,onPointerMove:V,onPointerUp:q,onPointerCancel:q,onPointerLeave:q,onDoubleClick:G,children:e("img",{src:r.url,alt:"",draggable:!1,style:{position:"absolute",top:"50%",left:"50%",width:`${h.width}px`,height:`${h.height}px`,maxWidth:"none",maxHeight:"none",transform:`translate(-50%, -50%) translate(${x.x}px, ${x.y}px) scale(${v}) rotate(${c}deg)`,transformOrigin:"center center",userSelect:"none",pointerEvents:"none",transition:k?"none":"transform 0.15s ease-out",filter:"drop-shadow(0 12px 24px rgba(0,0,0,0.4))"}})}),e("div",{style:E,children:t("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:[e("button",{onClick:()=>J("out"),style:P,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.3)"},title:"Zoom Out",children:e(D,{})}),e("button",{onClick:()=>J("in"),style:P,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.3)"},title:"Zoom In",children:e(z,{})}),e("button",{onClick:X,style:P,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.3)"},title:"Fit to screen",children:"Fit"}),e("button",{onClick:_,style:P,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.3)"},title:"Actual size",children:"1:1"}),e("button",{onClick:()=>{u(e=>(e+90)%360)},style:P,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.3)"},title:"Rotate Clockwise",children:e(j,{})}),e("button",{onClick:()=>{u(e=>(e-90+360)%360)},style:P,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.3)"},title:"Rotate Counter-Clockwise",children:e(L,{})}),e("button",{onClick:R,style:P,onMouseEnter:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.5)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="rgba(0, 0, 0, 0.3)"},title:g?"Exit Fullscreen":"Enter Fullscreen",children:e(g?C:M,{})})]})}),e("div",{style:$,children:e("div",{ref:I,onPointerDown:Q,onPointerMove:ee,onPointerUp:te,onPointerLeave:te,style:{position:"relative",width:"10px",height:`${f}px`,borderRadius:"9999px",background:"linear-gradient(180deg, rgba(255,255,255,0.32) 0%, rgba(255,255,255,0.06) 100%)",boxShadow:"inset 0 0 0 1px rgba(255,255,255,0.2)",cursor:"pointer",touchAction:"none"},"aria-label":"Zoom slider",role:"slider","aria-valuemin":Math.round(100*B),"aria-valuemax":Math.round(100*W),"aria-valuenow":Math.round(100*v),children:e("div",{style:{position:"absolute",bottom:(v-B)/(W-B)*100+"%",left:"50%",width:"18px",height:"18px",borderRadius:"50%",background:"radial-gradient(circle at 30% 30%, #fff, #d1d5db 45%, #0f172a 100%)",boxShadow:"0 2px 8px rgba(0,0,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.35)",transform:"translate(-50%, 50%)",pointerEvents:"none"}})})}),t("div",{style:{position:"absolute",bottom:"1rem",left:"1rem",backgroundColor:"rgba(0, 0, 0, 0.3)",borderRadius:"0.375rem",padding:"0.25rem 0.5rem",backdropFilter:"blur(16px)",fontSize:"0.75rem",lineHeight:"1rem"},children:[Math.round(100*v),"% â€¢ ",o,"Ã—",i," â€¢ Fit"," ",Math.round(100*F),"%"]})]})}):e("div",{style:{minHeight:"300px",display:"flex",alignItems:"center",justifyContent:"center"},children:e("p",{children:"Loading..."})})})},[r.status,r.url,h,c,x.x,x.y,v,g,R,re,U,Y,Z,V,q,G,J,X,_,F]),openImage:S,closeImage:U}}(),F=i(null),[H,B]=o(!1),W="profile"===h,A=Object.assign(Object.assign(Object.assign({},R),n),{uploadHeaders:Object.assign(Object.assign(Object.assign({},R.uploadHeaders),(null==n?void 0:n.additionalHeaders)||{}),(null==n?void 0:n.uploadHeaders)||{}),deleteHeaders:Object.assign(Object.assign({},(null==n?void 0:n.additionalHeaders)||{}),(null==n?void 0:n.deleteHeaders)||{})}),{uploadProgress:N,error:Y,loading:Z,deleting:V,handleImageChange:q,handleDeleteImage:X}=U({apiConfig:A,testMode:I,testUploadDelay:$,onChangeImage:p,enableAbortController:x,currentImageUrl:u,setImgError:B,debug:w}),_={primary:"#2a84fa",error:"#EF4444",progress:"#d24670",placeholder:"#BCBEC0",text:"#fafafa",textDisabled:"#e6e6e6"},[G,J]=o(!1),K=a(()=>{var e;null===(e=F.current)||void 0===e||e.click()},[]),Q=s(()=>f/2,[f]),ee=s(()=>2*Math.PI*Q,[Q]),te=s(()=>(1-N/100)*ee,[N,ee]),re=s(()=>.06*f,[f]),ne=s(()=>Math.max(.2*f,b),[f,b]),oe=s(()=>Object.assign(Object.assign({},_),c),[c]),ie=s(()=>({width:`${f}px`,height:`${f}px`,borderRadius:W?"50%":"12%"}),[f,W]);return t("div",{dir:"ltr",style:{maxWidth:"20rem",width:"100%",display:"flex",flexDirection:"column",margin:"0 auto",padding:"1rem",gap:"0.75rem",paddingTop:"0",borderRadius:"0.5rem"},children:[e("div",{style:{display:"flex",justifyItems:"center",justifyContent:"center"},className:`${d.titleContainer||""}`,children:m&&e("h3",{className:d.title||"",children:m})}),t("div",{style:{display:"flex",justifyItems:"center",justifyContent:"center",position:"relative"},children:[T(),t("div",{onDragOver:e=>{e.preventDefault(),J(!0)},onDragLeave:()=>J(!1),onDrop:e=>{e.preventDefault(),J(!1);const t=e.dataTransfer.files;if(t.length>0){const e=t[0];e.type.startsWith("image/")&&q({target:{files:[e]}})}},style:Object.assign(Object.assign({},ie),{position:"relative",outlineWidth:G?"2px":void 0,outlineStyle:G?"dashed":void 0,outlineColor:G?"#3b82f6":void 0,backgroundColor:G?"rgba(147,197,253,0.5)":void 0,transitionProperty:G?"background-color":void 0,transitionDuration:G?"100ms":void 0}),children:[u?e("img",{alt:"",title:"version: 2.4.0",draggable:"false",src:H?"data:image/svg+xml,%3Csvg%20version%3D%221.0%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22500.000000pt%22%20height%3D%22500.000000pt%22%20viewBox%3D%22-100%20-50%20500.000000%20500.000000%22%20preserveAspectRatio%3D%22xMidYMid%20meet%22%3E%3Cg%20transform%3D%22translate(0.000000%2C400.000000)%20scale(0.100000%2C-0.100000)%22%20fill%3D%22%23000000%22%20stroke%3D%22none%22%3E%3Cpath%20d%3D%22M480%202005%20l0%20-1305%201020%200%201020%200%200%201125%200%201125%20-100%200%20-100%200%200%2095%200%2095%20-100%200%20-100%200%200%2085%200%2085%20-820%200%20-820%200%200%20-1305z%20m1078%20753%20l2%20-378%20380%200%20380%200%200%20-740%200%20-740%20-845%200%20-845%200%200%201120%200%201120%20463%20-2%20462%20-3%203%20-377z%20m564%20290%20l3%20-93%2098%20-3%2097%20-3%200%20-190%200%20-189%20-282%202%20-283%203%20-3%20270%20c-1%20148%200%20275%203%20282%203%2010%2048%2013%20184%2013%20l180%200%203%20-92z%22%2F%3E%3Cpath%20d%3D%22M970%202570%20l0%20-190%20105%200%20105%200%200%20190%200%20190%20-105%200%20-105%200%200%20-190z%22%2F%3E%3Cpath%20d%3D%22M1180%201565%20l0%20-95%20-105%200%20-105%200%200%20-105%200%20-106%20103%203%20102%203%203%20103%203%20102%20317%20-2%20317%20-3%203%20-102%203%20-103%2099%200%20100%200%200%20105%200%20105%20-100%200%20-100%200%200%2095%200%2095%20-320%200%20-320%200%200%20-95z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E":u,className:`${d.image||""}`,onDragStart:e=>{e.preventDefault()},"aria-describedby":"image-description",onError:()=>B(!0),onClick:()=>S(u),style:{width:"100%",height:"100%",objectFit:"cover",cursor:"pointer",borderRadius:W?"50%":"12%",userSelect:"none"}}):e("div",{style:{borderRadius:W?"50%":"12%",display:"flex",width:"100%",height:"100%",justifyItems:"center",justifyContent:"center"},children:t("svg",W?{width:f,height:f,viewBox:"-2 -2 110 110",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("circle",{cx:"53.5",cy:"52.5",r:"52.5",stroke:oe.placeholder,strokeWidth:"2"}),e("path",{d:"M53 106C38.8432 106 25.5338 100.487 15.5234 90.4766C5.51283 80.4662 0 67.1568 0 53C0 38.8432 5.51283 25.5338 15.5234 15.5234C25.5338 5.51283 38.8432 0 53 0C67.1568 0 80.4662 5.51283 90.4766 15.5234C100.487 25.5338 106 38.8432 106 53C106 67.1568 100.487 80.4662 90.4766 90.4766C80.4662 100.487 67.1568 106 53 106ZM53 4.14062C26.0588 4.14062 4.14062 26.0588 4.14062 53C4.14062 79.9412 26.0588 101.859 53 101.859C79.9412 101.859 101.859 79.9412 101.859 53C101.859 26.0588 79.9412 4.14062 53 4.14062Z",fill:oe.placeholder,stroke:oe.placeholder,strokeWidth:"2"}),e("path",{d:"M53 62.0538C41.6963 62.0538 32.5 52.8577 32.5 41.554C32.5 30.2503 41.6961 21.054 53 21.054C64.3039 21.054 73.5001 30.2501 73.5001 41.554C73.5001 52.8577 64.3037 62.0538 53 62.0538ZM53 25.1946C43.9795 25.1946 36.6406 32.5334 36.6406 41.554C36.6406 50.5745 43.9795 57.9132 53 57.9132C62.0206 57.9132 69.3594 50.5745 69.3594 41.554C69.3594 32.5334 62.0206 25.1946 53 25.1946Z",fill:oe.placeholder,stroke:oe.placeholder,strokeWidth:"2"}),e("path",{d:"M88.4081 91.6778C87.4235 91.6778 86.5507 90.9731 86.3724 89.9698C83.4945 73.7943 69.4594 62.0537 53 62.0537C36.5406 62.0537 22.5057 73.794 19.6276 89.9698C19.4274 91.0956 18.3527 91.8459 17.2267 91.6455C16.1008 91.4453 15.3505 90.3702 15.5509 89.2446C17.0956 80.5627 21.6741 72.6276 28.443 66.9005C35.293 61.1049 44.014 57.9131 53 57.9131C61.986 57.9131 70.707 61.1049 77.557 66.9005C84.3259 72.6276 88.9044 80.5627 90.4491 89.2446C90.6495 90.3702 89.8992 91.4451 88.7733 91.6455C88.6508 91.6673 88.5284 91.6778 88.4081 91.6778Z",fill:oe.placeholder,stroke:oe.placeholder,strokeWidth:"2"})]}:{width:f,height:f,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e("defs",{}),e("g",{id:"Page-1",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",children:e("g",{id:"Icon-Set",transform:"translate(-360.000000, -99.000000)",fill:oe.placeholder,children:e("path",{d:"M368,109 C366.896,109 366,108.104 366,107 C366,105.896 366.896,105 368,105 C369.104,105 370,105.896 370,107 C370,108.104 369.104,109 368,109 L368,109 Z M368,103 C365.791,103 364,104.791 364,107 C364,109.209 365.791,111 368,111 C370.209,111 372,109.209 372,107 C372,104.791 370.209,103 368,103 L368,103 Z M390,116.128 L384,110 L374.059,120.111 L370,116 L362,123.337 L362,103 C362,101.896 362.896,101 364,101 L388,101 C389.104,101 390,101.896 390,103 L390,116.128 L390,116.128 Z M390,127 C390,128.104 389.104,129 388,129 L382.832,129 L375.464,121.535 L384,112.999 L390,118.999 L390,127 L390,127 Z M364,129 C362.896,129 362,128.104 362,127 L362,126.061 L369.945,118.945 L380.001,129 L364,129 L364,129 Z M388,99 L364,99 C361.791,99 360,100.791 360,103 L360,127 C360,129.209 361.791,131 364,131 L388,131 C390.209,131 392,129.209 392,127 L392,103 C392,100.791 390.209,99 388,99 L388,99 Z",id:"image-picture"})})})]})}),Z&&(y&&u||!v&&!u)&&e("div",{style:{margin:"0 auto",top:"0",right:"0",bottom:"0",left:"0",display:"flex",alignItems:"center",justifyContent:"center",width:`${f}px !important`,height:`${f}px !important`,position:"absolute",borderRadius:W?"50%":"12%",backdropFilter:"blur(4px)",zIndex:5,WebkitBackdropFilter:"blur(4px)",backgroundColor:"rgba(0, 0, 0, 0.2)"},children:t("div",{style:{fontSize:.5*ne,fontWeight:"600",color:"white"},children:[Math.round(N),"%"]})}),v&&N>0&&N<100&&W?e("svg",{style:{position:"absolute",zIndex:6,top:"0",left:"0",pointerEvents:"none"},width:f,height:f,viewBox:`0 0 ${f} ${f}`,children:e("circle",{cx:f/2,cy:f/2,r:f/2-.035*f,fill:"none",stroke:oe.progress,strokeWidth:f*(10/180),strokeDasharray:ee,strokeDashoffset:te,transform:`rotate(-90 ${f/2} ${f/2})`,style:{transition:"stroke-dashoffset 0.3s ease"}})}):v&&N>0&&N<100&&e("div",{children:(()=>{const t=.94*f,r=.94*f,n=2*(t+r),o=n*(1-N/100);return e("svg",{width:f,height:f,style:{position:"absolute",top:"0",zIndex:6,left:"0"},viewBox:`0 0 ${f} ${f}`,xmlns:"http://www.w3.org/2000/svg",children:e("rect",{x:.03*f,y:.03*f,rx:.09*f,width:t,height:r,fill:"none",stroke:oe.progress,strokeWidth:f*(10/180),strokeDasharray:n,strokeDashoffset:o,style:{transition:"stroke-dashoffset 0.3s ease",borderRadius:"0.5rem",overflow:"hidden"}})})})()}),!g&&t(r,{children:[e("button",{type:"button","aria-label":"Edit profile picture",style:{backgroundColor:oe.primary,width:`${ne}px`,height:`${ne}px`,bottom:`${re}px`,right:`${re}px`,borderRadius:W?"50%":"28%",position:"absolute",padding:"0.25rem",cursor:"pointer",transition:"transform 150ms ease-in-out",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},className:`${d.edit||""}`,onMouseDown:e=>{e.currentTarget.style.transform="scale(0.9)"},onMouseUp:e=>{e.currentTarget.style.transform="scale(1)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},onClick:K,disabled:Z,children:e(k,{style:{display:"flex",justifyItems:"center",justifyContent:"center"},color:Z?oe.text:oe.textDisabled,size:.55*ne})}),u&&e("button",{type:"button",onMouseDown:e=>{e.currentTarget.style.transform="scale(0.9)"},onMouseUp:e=>{e.currentTarget.style.transform="scale(1)"},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)"},"aria-label":"Delete profile picture",style:{backgroundColor:oe.error,width:`${ne}px`,height:`${ne}px`,bottom:`${re}px`,left:`${re}px`,borderRadius:W?"50%":"28%",position:"absolute",padding:"0.25rem",cursor:"pointer",transition:"transform 150ms ease-in-out",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},className:`${d.delete||""}`,onClick:X,disabled:Z,children:V?t(r,{children:[e(P,{color:Z?oe.text:oe.textDisabled,size:.5*ne,style:{display:"flex",justifyItems:"center",justifyContent:"center",animation:"spin 1s linear infinite",transformOrigin:"center"}}),e("style",{children:"\n          @keyframes spin {\n            from { transform: rotate(0deg); }\n            to { transform: rotate(360deg); }\n          }\n        "})]}):e(E,{style:{display:"flex",justifyItems:"center",justifyContent:"center"},color:Z?oe.text:oe.textDisabled,size:.55*ne})})]})]}),e("span",{id:"image-description",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},children:u?"Current profile picture":"No image selected"}),e("input",{ref:F,type:"file",accept:"image/*",onChange:q,style:{display:"none"},disabled:Z,"aria-label":"Upload image","aria-describedby":"file-upload-description"}),e("span",{id:"file-upload-description",style:{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"},children:"Upload an image file for your profile picture"})]}),Y&&e("div",{style:{display:"flex",justifyItems:"center",justifyContent:"center"},children:e("span",{style:{color:"#dc2626",textAlign:"center",fontSize:"0.875rem"},children:Y})})]})};export{F as PictureSelector,F as default};
